{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\CMPS4910-Senior-Project\\\\contact-tracing-app\\\\navigation\\\\stackNavigator.js\";\n\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\nimport SignedInNavigator from \"./tabNavigator\";\nimport LoginScreen from \"../screens/loginScreen\";\nimport LoadingScreen from \"../screens/loadingScreen\";\nvar AuthContext = React.createContext();\nvar Stack = createStackNavigator();\n\nvar Navigation = function Navigation() {\n  var authContext = React.useMemo(function () {\n    return {\n      signIn: function signIn(data) {\n        return _regeneratorRuntime.async(function signIn$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                savedID = data.id;\n                fetch('http://localhost:3000/api/auth/login', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify(data)\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  saveTokenAsync(data.accessToken);\n                  accessToken = data.accessToken;\n                  console.log(\"Success: \", data);\n                }).catch(function (error) {\n                  console.error('Error: ', error);\n                });\n                dispatch({\n                  type: 'SIGN_IN',\n                  token: accessToken\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      signOut: function signOut() {\n        return dispatch({\n          type: 'SIGN_OUT'\n        });\n      },\n      signUp: function signUp(data) {\n        return _regeneratorRuntime.async(function signUp$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                dispatch({\n                  type: 'SIGN_IN',\n                  token: 'dummy-auth-token'\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    };\n  }, []);\n  return React.createElement(AuthContext.Provider, {\n    value: authContext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, React.createElement(NavigationContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, React.createElement(Stack.Navigator, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, state.isLoading ? React.createElement(Stack.Screen, {\n    name: \"LoadingScreen\",\n    component: LoadingScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 29\n    }\n  }) : state.userToken == null ? React.createElement(Stack.Screen, {\n    name: \"Login\",\n    component: LoginScreen(AuthContext),\n    options: {\n      headerShown: false\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }\n  }) : React.createElement(Stack.Screen, {\n    name: \"SignedIn\",\n    component: SignedInNavigator,\n    options: {\n      headerShown: false\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 37\n    }\n  }))));\n};\n\nexport default Navigation;","map":{"version":3,"sources":["D:/Documents/GitHub/CMPS4910-Senior-Project/contact-tracing-app/navigation/stackNavigator.js"],"names":["NavigationContainer","createStackNavigator","React","SignedInNavigator","LoginScreen","LoadingScreen","AuthContext","createContext","Stack","Navigation","authContext","useMemo","signIn","data","savedID","id","fetch","method","headers","body","JSON","stringify","then","response","json","saveTokenAsync","accessToken","console","log","catch","error","dispatch","type","token","signOut","signUp","state","isLoading","userToken","headerShown"],"mappings":";;;;;AAAA,SAASA,mBAAT,QAAoC,0BAApC;AACA,SAASC,oBAAT,QAAqC,yBAArC;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAOC,iBAAP;AAEA,OAAOC,WAAP;AACA,OAAOC,aAAP;AAEA,IAAMC,WAAW,GAAGJ,KAAK,CAACK,aAAN,EAApB;AACA,IAAMC,KAAK,GAAGP,oBAAoB,EAAlC;;AACA,IAAMQ,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrB,MAAMC,WAAW,GAAGR,KAAK,CAACS,OAAN,CAChB;AAAA,WAEI;AAEIC,MAAAA,MAAM,EAAE,gBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAEJC,gBAAAA,OAAO,GAAGD,IAAI,CAACE,EAAf;AAEAC,gBAAAA,KAAK,CAAC,sCAAD,EAAyC;AAC1CC,kBAAAA,MAAM,EAAE,MADkC;AAE1CC,kBAAAA,OAAO,EAAE;AACL,oCAAgB;AADX,mBAFiC;AAK1CC,kBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf;AALoC,iBAAzC,CAAL,CAOKS,IAPL,CAOU,UAAAC,QAAQ;AAAA,yBAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,iBAPlB,EAQKF,IARL,CAQU,UAAAT,IAAI,EAAI;AACVY,kBAAAA,cAAc,CAACZ,IAAI,CAACa,WAAN,CAAd;AACAA,kBAAAA,WAAW,GAAGb,IAAI,CAACa,WAAnB;AACAC,kBAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBf,IAAzB;AAEH,iBAbL,EAcKgB,KAdL,CAcW,UAACC,KAAD,EAAW;AACdH,kBAAAA,OAAO,CAACG,KAAR,CAAc,SAAd,EAAyBA,KAAzB;AACH,iBAhBL;AAiBAC,gBAAAA,QAAQ,CAAC;AAAEC,kBAAAA,IAAI,EAAE,SAAR;AAAmBC,kBAAAA,KAAK,EAAEP;AAA1B,iBAAD,CAAR;;AArBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAFZ;AAyBIQ,MAAAA,OAAO,EAAE;AAAA,eAAMH,QAAQ,CAAC;AAAEC,UAAAA,IAAI,EAAE;AAAR,SAAD,CAAd;AAAA,OAzBb;AA0BIG,MAAAA,MAAM,EAAE,gBAAMtB,IAAN;AAAA;AAAA;AAAA;AAAA;AACJkB,gBAAAA,QAAQ,CAAC;AAAEC,kBAAAA,IAAI,EAAE,SAAR;AAAmBC,kBAAAA,KAAK,EAAE;AAA1B,iBAAD,CAAR;;AADI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA1BZ,KAFJ;AAAA,GADgB,EAiChB,EAjCgB,CAApB;AAqCA,SACI,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEvB,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD,CAAO,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQ0B,KAAK,CAACC,SAAN,GACI,oBAAC,KAAD,CAAO,MAAP;AACI,IAAA,IAAI,EAAC,eADT;AAEI,IAAA,SAAS,EAAEhC,aAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,GAKI+B,KAAK,CAACE,SAAN,IAAmB,IAAnB,GAEA,oBAAC,KAAD,CAAO,MAAP;AACI,IAAA,IAAI,EAAC,OADT;AAEI,IAAA,SAAS,EAAElC,WAAW,CAACE,WAAD,CAF1B;AAGI,IAAA,OAAO,EAAE;AACLiC,MAAAA,WAAW,EAAE;AADR,KAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,GAUQ,oBAAC,KAAD,CAAO,MAAP;AACI,IAAA,IAAI,EAAC,UADT;AAEI,IAAA,SAAS,EAAEpC,iBAFf;AAGI,IAAA,OAAO,EAAE;AACLoC,MAAAA,WAAW,EAAE;AADR,KAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBpB,CADJ,CADJ,CADJ;AAkCH,CAxED;;AA2EA,eAAe9B,UAAf","sourcesContent":["import { NavigationContainer } from '@react-navigation/native';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport * as React from 'react';\r\nimport SignedInNavigator from './tabNavigator';\r\n\r\nimport LoginScreen from '../screens/loginScreen';\r\nimport LoadingScreen from '../screens/loadingScreen';\r\n\r\nconst AuthContext = React.createContext();\r\nconst Stack = createStackNavigator();\r\nconst Navigation = () => {\r\n    const authContext = React.useMemo(\r\n        () => (\r\n\r\n            {\r\n\r\n                signIn: async data => {\r\n                    //send sign in data here\r\n                    savedID = data.id\r\n\r\n                    fetch('http://localhost:3000/api/auth/login', {\r\n                        method: 'POST',\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n                        body: JSON.stringify(data),\r\n                    })\r\n                        .then(response => response.json())\r\n                        .then(data => {\r\n                            saveTokenAsync(data.accessToken);\r\n                            accessToken = data.accessToken;\r\n                            console.log(\"Success: \", data);\r\n\r\n                        })\r\n                        .catch((error) => {\r\n                            console.error('Error: ', error);\r\n                        });\r\n                    dispatch({ type: 'SIGN_IN', token: accessToken });\r\n                },\r\n                signOut: () => dispatch({ type: 'SIGN_OUT' }),\r\n                signUp: async data => {\r\n                    dispatch({ type: 'SIGN_IN', token: 'dummy-auth-token' });\r\n                },\r\n            }),\r\n        []\r\n    );\r\n\r\n\r\n    return (\r\n        <AuthContext.Provider value={authContext}>\r\n            <NavigationContainer>\r\n                <Stack.Navigator>\r\n                    {\r\n                        state.isLoading ? (\r\n                            <Stack.Screen\r\n                                name=\"LoadingScreen\"\r\n                                component={LoadingScreen}\r\n                            />\r\n                        ) : state.userToken == null ? (\r\n                            // No authenticated token\r\n                            <Stack.Screen\r\n                                name=\"Login\"\r\n                                component={LoginScreen(AuthContext)}\r\n                                options={{\r\n                                    headerShown: false\r\n                                }}\r\n                            />\r\n                        ) : (\r\n                                    <Stack.Screen\r\n                                        name=\"SignedIn\"\r\n                                        component={SignedInNavigator}\r\n                                        options={{\r\n                                            headerShown: false\r\n                                        }}\r\n                                    />\r\n                                )\r\n                    }\r\n                </Stack.Navigator>\r\n            </NavigationContainer>\r\n        </AuthContext.Provider>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Navigation;"]},"metadata":{},"sourceType":"module"}